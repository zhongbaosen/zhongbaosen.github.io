---
title: Centos7使用yum安装Mysql
date: 2018-3-26 11:28:46
tags: [centos,mysql]
---

## 安装

Centos7的yum源中默认是没有mysql,因为现在已经用mariaDB代替mysql了。

首先我们下载mysql的repo源，我们可以去mysql官网找最新的repo源地址

[戳我进入地址](https://dev.mysql.com/downloads/repo/yum/)

开始在linux下下载repo源

## 下载mysql源

```bash
//下载mysql rpm包
# wget http://dev.mysql.com/get/mysql57-community-release-el7-11.noarch.rpm
 
//安装mysql rpm包
# rpm -ivh mysql57-community-release-el7-11.noarch.rpm
 
//安装mysql
# yum install mysql-community-server
```

## 重启服务

安装成功后需要重启mysql服务。

```bash
# service mysqld restart
```

## 获取随机密码

刚开始安装的Mysql5.7是会随机生成一个root密码的，我们要先找到这个随机密码，然后改新密码。我们可以通过grep命令查找随机root密码。

```bash
[root@local bin]# grep "password" /var/log/mysqld.log
2017-09-24T08:03:30.664086Z 1 [Note] A temporary password is generated for root@localhost: 8A3xwbk8_P1A
```

## 使用随机密码登录

```bash
$ mysql -uroot -p
```

再输入密码进行访问

## 修改密码

用该密码登录到服务端后，必须马上修改密码，不然会报如下错误：

```bash
mysql> select @@log_error;
ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.
mysql>
```

```bash
mysql> ALTER USER 'root'@'localhost' IDENTIFIED BY 'root123';
```

## 密码过于简单出现的问题

如果密码设置太简单出现以下的提示

```bash
ERROR 1819 (HY000): Your password does not satisfy the current policy requirements
```

如何解决`ERROR 1819 (HY000): Your password does not satisfy the current policy requirements`呢？ 这里直接提供解决方案文末有详细的说明



必须修改两个全局参数： 
首先，修改validate_password_policy参数的值

```bash
mysql> set global validate_password_policy=0; 
```

再修改密码的长度

```bash
mysql> set global validate_password_length=1;
```

```bash
mysql> set global validate_password_mixed_case_count=2;
```

再次执行修改密码就可以了

## 数据库授权访问

```bash
mysql> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '123456' WITH GRANT OPTION;
```

%号代表所有都能访问，若输入你的IP地址，则只有这个IP能远程访问到

最后修改生效的命令

```bash
mysql> FLUSH PRIVILEGES;
```



